<?php  
class ControllerSmartBizProduct extends SmartBizController {
	private $error = array(); 
	public function index() { 					$this->data['link_product_detail'] = $this->getDetailPage();				$this->data['link_contact'] = $this->getContactPage();
		$this->updateStatusMenuNavigation('product');				$this->load->model('smartbiz/solution');
		$this->load->model('smartbiz/solution_detail');
		
		$solutions = $this->model_smartbiz_solution->getAll();		foreach($solutions as &$solution) {			$names = explode(' ',$solution['name']);			$temp = array();			foreach($names as $key=>$name) {				$name = trim($name);				if(!empty($name) && $name != '-') {					$temp[$key] = $name;				}			}			$solution['searchengine'] = mb_strtolower(implode('-',$temp),'UTF-8');		}
		$this->data['solutions'] = $solutions;
		
		$uri = $_SERVER['REQUEST_URI'];
		$elements = explode('/',$uri);
		$params = array();
		foreach($elements as $ele) {
			if(strpos($ele,':') !== false) {
				$arr = explode(':',$ele);
				$params[$arr[0]] = $arr[1];				$this->data[$arr[0]] = $arr[1];
			}
		}
				if(!isset($params['id'])) {			$parent = $this->model_smartbiz_solution->getFirstId();			$params['id'] = $parent['solution_id'];			$this->data['id'] = $parent['solution_id'];		}				$solutionDataObj = $this->model_smartbiz_solution->getById($params['id']);		foreach($solutionDataObj as $key=>&$solution) {			if($key == 'price') $solution = (int)$solution;			if($key == 'special_price') $solution = (int)$solution;		}		$this->data['solutionDataObj'] = $solutionDataObj;		$solutionDetailDataObjs = $this->model_smartbiz_solution_detail->getByParentId($params['id']);		$this->data['solutionDetailDataObjs'] = $solutionDetailDataObjs;				$this->document->setKeywords($solutionDataObj['meta_keyword']);		$this->data['keywords'] = $this->document->getKeywords();		
		$product_type = array(			'smartbiz-suite' => '',			'point-of-sales-pos' => '',			'enterprise-resource-planning-erp' => '',			'business-intelligence-bi' => '',			'human-resource-hrm' => '',			'ecommerce' => '',			'customer-relationship' => '',			'distribution-management-system-dms'=>'',		);				$keys = array_keys($product_type);				foreach($keys as $key) {			$product_display[$key] = 'display:none;';			$product_selectLava[$key] = '';			$product_scrollpane[$key] = '';		}		$spans = array(			'Smart',			'Point',			'Enter',			'Content',			'Business',			'Human',			'Commerce',			'Customer',		);		$listMenu = array(			'smartbiz-suite' => array(									'Distribution',									'Retail',									'Manufactoring',									'SmartbizFashion',								),			'point-of-sales-pos' => array(									'Sales',									'Purchase',									'Warehouse',									'Receivable',									'Finance',									'Project',									'Manufactoring',									'Core',									'Information',								),			'enterprise-resource-planning-erp' => array(									'Benefit',									'Sales',									'Purchase',									'Warehouse',									'Receivable',								),			'business-intelligence-bi' => array(									'Benefit',									'Flower',									'Mobile',									'Electric',									'Fashion',									'Food',									'Clients',								),			'human-resource-hrm' => array(									'Performance',									'Analysis',									'Report',									'Etl',								),			'ecommerce' => array(									'Time',									'Leave',									'Benefit',									'Pim',									'Ess',									'Admin',									'Performance',								),			'customer-relationship' => array(									'Ecommerce',									'Workflow',									'Marketing',									'Payment',									'Social',									'InternetMarketing',								),			'distribution-management-system-dms' => array(									'Marketing',									'Sales',									'CustomerSupport',								),		);
		if (isset($this->request->get['product_type'])) {			$product_type[$this->request->get['product_type']] = 'SubMenuPagesCur';			$product_display[$this->request->get['product_type']] = 'display:block;';			$product_selectLava[$this->request->get['product_type']] = 'selectedLava';			$product_scrollpane[$this->request->get['product_type']] = 'scroll-pane';			$this->data['js_binding_tab_click'] = 'bindingTabClick("' . $this->request->get['product_type'] . '", true);';		} else {			$product_type[$keys[0]] = 'SubMenuPagesCur';			$product_display[$keys[0]] = 'display:block;';			$product_selectLava[$keys[0]] = 'selectedLava';			$product_scrollpane[$keys[0]] = 'scroll-pane';			$this->data['js_binding_tab_click'] = 'bindingTabClick("smartbiz-suite", true);';		}
		// Assign to template
		$this->data['product_type'] = $product_type;		$this->data['product_display'] = $product_display;		$this->data['spans'] = $spans;		$this->data['keys'] = $keys;		$this->data['cur_key'] = isset($this->request->get['product_type'])?$this->request->get['product_type']:$keys[0];		$this->data['listMenu'] = $listMenu;		$this->data['product_selectLava'] = $product_selectLava;		$this->data['product_scrollpane'] = $product_scrollpane;
	if (isset($this->request->get['product_type'])) {            if($this->request->get['product_type'] == 'smartbiz-suite'){                $this->data['page_title'] = "Bộ giải pháp toàn diện cho doanh nghiệp vừa và nhỏ | SmartBiz Suite";                $this->data['page_description'] = "SmartBiz Suite quản lý kho thời gian thực, hỗ trợ nhiều đơn vị kinh doanh, nhiều kho, và tính gía trị tồn kho. Quản lý tài chính và dòng tiền. Quản lý sản xuất và quy trình. Hỗ trợ đồng bộ dữ liệu giữa các vị trí, giữa trung tâm với chi nhánh và cửa hàng";             } else if($this->request->get['product_type']=='enterprise-resource-planning-erp') {                $this->data['page_title'] = "Giải pháp toàn diện quản lý doanh nghiệp | Enterprise Resource Planning | SmartBiz ERP";                $this->data['page_description'] = "SmartBiz ERP quản lý quy trình bán hàng, đơn đặt hàng, phiếu xuất kho, hóa đơn, phải thu phải trả, công nợ. Kế hoạch mua hàng. Sản phẩm có nhiều thuộc tính, theo lô, theo số se-ri. Di chuyển hàng giữa các kho, thông báo khi gần hết hàng. Tài khoản tiền mặt, tài khoản ngân hàng. Chương trình khuyến mãi, lịch sử bảng giá";               } else if($this->request->get['product_type']=='distribution-management-system-dms') {                $this->data['page_title'] = "Giải pháp cho doanh nghiệp phân phối | Distribution Management System | SmartBiz DMS";                $this->data['page_description'] = "SmartBiz DMS nhận đơn đặt hàng, giữ hàng trong kho, thiết lập chương trình khuyến mãi, đăng ký hóa đơn, kế hoạch mua hàng, hạn mức báo động, hỗ trợ nhiều kho, chuyển hàng giữa các kho, so sánh công nợ khách hàng & nhà cung cấp";             } else if($this->request->get['product_type']=='point-of-sales-pos') {                $this->data['page_title'] = "Phần cứng phần mềm bán hàng tiện lợi | Point of Sales | SmartBiz POS";                $this->data['page_description'] = "SmartBiz POS có hệ thống chạy ổn định 24/7. Giao diện đơn giản, thân thiện. Chi phí sở hữu thấp. Hệ thống báo cáo đầy đủ đa dạng. Bán hàng, giảm giá và dễ dàng tìm kiếm sản phẩm. Chương trình khách hàng thân thiết. Hạn mức tồn kho và điều chỉnh kho. Thuộc tính sản phẩm và ghép sản phẩm. Quà tặng, tích lũy điểm, dịch vụ miễn phí. Áp dụng cho Nhà hàng quán ăn, hỗ trợ thực đơn, đặt món, nhà bếp, thu ngân";            } else if($this->request->get['product_type']=='business-intelligence-bi') {                $this->data['page_title'] = "Báo cáo quản lý và trí tuệ doanh nghiệp | Business Intelligence | SmartBiz BI";                $this->data['page_description'] = "SmartBiz BI cung cấp bảng điều khiển với các thông số hiệu suất kinh doanh, đồ thị, biểu đồ tùy chọn. Tích hợp với các báo cáo và phân tích truy vấn phức tạp. Hỗ trợ nhiều định dạng và hoạt động trên web. Nhận dữ liệu từ nhiều cơ sở dữ liệu khác nhau";             } else if($this->request->get['product_type']=='human-resource-hrm') {                $this->data['page_title'] = "Quản lý nhân sự tiền lương | Human Resource Management | SmartBiz HRM";                $this->data['page_description'] = "SmartBiz HRM giám sát chấm công thời gian làm việc. Nghỉ phép theo quy trình, chính sách. Quyền lợi người lao động như bảo hiểm y tế, bảo hiểm xã hội, bảng lương, phiếu lương. Thông tin nhân viên. Đánh giá kết quả hiệu suất công việc nhân viên";                } else if($this->request->get['product_type']=='ecommerce'){                $this->data['page_title'] = "Xây dựng bảo trì các trang thương mại điện tử | SmartBiz E-Commerce";                $this->data['page_description'] = "Duyệt Catalog, checkout, quản lý đơn đặt hàng. Marketing qua email và SMS";              } else if($this->request->get['product_type']=='customer-relationship') {                $this->data['page_title'] = "Quan hệ khách hàng | Customer Relationship Management | SmartBiz CRM";                $this->data['page_description'] = "SmartBiz CRM cho phép marketing trên nhiều kênh, hỗ trợ quản lý email số lượng lớn. Quản lý cơ hội kinh doanh và tài khoản khách hàng";              }        }
		$this->display('/template/product/product.tpl');
	}
}
?>